{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/semantic-version","result":{"data":{"markdownRemark":{"id":"558fd3e3-1941-5c6d-9807-28265ec81fba","html":"<p>最近的工作中一直负责着组内前端组件库的升级迭代，需要管理组件库的版本。由于发版的次数较多，版本直接从<code class=\"language-text\">1.0.0</code>飙到了<code class=\"language-text\">1.0.40</code>且缺少必要的文档，组件库使用方在升级的使用中也出现了一系列的不兼容问题😂。</p>\n<p>经人提点，了解了<code class=\"language-text\">语义化版本(semantic version)</code>的概念，获益良多。</p>\n<h2 id=\"什么是语义化版本\" style=\"position:relative;\"><a href=\"#%E4%BB%80%E4%B9%88%E6%98%AF%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC\" aria-label=\"什么是语义化版本 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>什么是语义化版本</h2>\n<p>语义化版本由三部分组成，格式为: <code class=\"language-text\">major.minor.patch</code>，三部分的递增规则如下:</p>\n<ul>\n<li><code class=\"language-text\">major</code>主版本号：当做了不兼容的 API 修改，</li>\n<li><code class=\"language-text\">minor</code>次版本号：当做了向下兼容的功能性新增，</li>\n<li><code class=\"language-text\">patch</code>修订号：当做了向下兼容的问题修正。</li>\n</ul>\n<blockquote>\n<p>开发的<code class=\"language-text\">pre</code>先行版本或编译元数据信息可以加到<code class=\"language-text\">major.minor.patch</code>的后面作为版本的延伸，例如: <code class=\"language-text\">webpack@5.0.0-beta.13</code>。</p>\n</blockquote>\n<h2 id=\"语义化版本的规范\" style=\"position:relative;\"><a href=\"#%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC%E7%9A%84%E8%A7%84%E8%8C%83\" aria-label=\"语义化版本的规范 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>语义化版本的规范</h2>\n<blockquote>\n<p>这是semver规范(2.0.0)的说明原文<a href=\"https://semver.org/lang/zh-CN/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">link</a>，下边列举开发中需要注意的点。</p>\n</blockquote>\n<ol>\n<li><code class=\"language-text\">major.minor.patch</code>的每一部分数值都必须递增，不能倒序且大于0。各部分数值不可以在开头补0。</li>\n<li>一旦发版，该版本内容<strong>不能</strong>修改。如需修改必须发新版。</li>\n<li><code class=\"language-text\">major</code>版本为0标识包还处于快速开发中，包的Api还不稳定，可能随时会发生改变。</li>\n<li><code class=\"language-text\">1.0.0</code>版本通常是稳定版的标识，后续的发版需要遵守语义化版本规范。</li>\n<li>稳定版<code class=\"language-text\">major &gt; 0</code>时，<code class=\"language-text\">patch</code>必须在只做了<strong>向下兼容的修正</strong>时才递增。这里的修正指的是针对不正确结果而进行的内部修改。</li>\n<li>稳定版<code class=\"language-text\">major &gt; 0</code>时，<code class=\"language-text\">minor</code>必须在做了<strong>向下兼容的新功能</strong>，或是<strong>标记弃用部分功能</strong>时可以递增；也可以在<strong>大量的修正、改进、新功能加入</strong>时可以递增。<code class=\"language-text\">minor</code>变化时<code class=\"language-text\">patch</code>必须清零。</li>\n<li><code class=\"language-text\">major</code>需要在加入了<strong>不兼容的功能</strong>时递增，也可以在发生了<code class=\"language-text\">minor</code>、<code class=\"language-text\">patch</code>级别的修改时递增。变化时<code class=\"language-text\">minor</code>和<code class=\"language-text\">patch</code>必须清零。</li>\n<li>\n<p>先行版本加在<code class=\"language-text\">patch</code>版本之后，先加上一个“连接号”再加上一连串以句点分隔的标识符来修饰。标识符可选范围<code class=\"language-text\">[0-9A-Za-z-]</code>，使用<code class=\"language-text\">.</code>作为分隔符。禁止留白和补零。</p>\n<blockquote>\n<p>1.2.3-alpha.1</p>\n<p>1.2.3-alpha.2</p>\n</blockquote>\n</li>\n<li>编译元数据信息版本加在<code class=\"language-text\">patch</code>版本之后，先加上一个“加号”再加上一连串以句点分隔的标识符来修饰。标识符可选范围<code class=\"language-text\">[0-9A-Za-z-]</code>，使用<code class=\"language-text\">.</code>作为分隔符。禁止留白和补零。</li>\n<li>\n<p>两个版本进行排序比较时，需根据优先级(<code class=\"language-text\">major</code> > <code class=\"language-text\">minor</code> > <code class=\"language-text\">patch</code> > <code class=\"language-text\">pre</code>)定义顺序进行差异比较，<strong>编译元数据</strong>不做比较。</p>\n<blockquote>\n<p>1.0.0 &#x3C; 2.0.0 &#x3C; 2.1.0 &#x3C; 2.1.1</p>\n<p>1.0.0-alpha.1 &#x3C; 1.0.0</p>\n</blockquote>\n</li>\n</ol>\n<h2 id=\"semver的应用\" style=\"position:relative;\"><a href=\"#semver%E7%9A%84%E5%BA%94%E7%94%A8\" aria-label=\"semver的应用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>semver的应用</h2>\n<p>semver的一个常见场景是npm包管理。具体会在后面介绍。</p>","fields":{"slug":"/posts/semantic-version","tagSlugs":["/tag/npm/","/tag/semver/"]},"frontmatter":{"date":"2020-03-11 22:00","description":"为了规范版本发布和简化依赖管理，应当了解\"语义化版本\"规则。","tags":["npm","semver"],"title":"语义化版本","socialImage":"semver.jpg"}}},"pageContext":{"slug":"/posts/semantic-version"}}}