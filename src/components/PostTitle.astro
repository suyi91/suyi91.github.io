---
import {formatDate} from "../utils/formatDate";
import {dealLabel} from "../utils/dealLabel";
import {t} from '../i18n/utils'
const {title, date, category, tags, lastModified = '', draft = false, readingTime = {}} = Astro.props
---

<div class="border-b-1">
  <!-- title -->
  <h1 class="break-all text-xl font-bold">{title}</h1>

  <!-- date + reading time row -->
  <div class="flex flex-wrap items-center gap-3 mt-2 mb-2 text-sm opacity-60">
    {
      date && (
        <span class="flex items-center gap-1">
          <i class="ri-calendar-2-fill"/>
          {formatDate(date)}
        </span>
      )
    }
    {
      lastModified && (
        <span class="flex items-center gap-1">
          <i class="ri-calendar-check-fill"/>
          {t('post.lastUpdated')}：{lastModified}
        </span>
      )
    }
    {
      readingTime.minutes && (
        <span class="flex items-center gap-1">
          <i class="ri-hourglass-fill"/>
          {Math.ceil(readingTime.minutes)}{t('title.minutes')} · {readingTime.words}{t('title.words')}
        </span>
      )
    }
    {
      draft &&
      <span class="meta-pill bg-yellow-100 text-yellow-700">
        <i class="ri-git-pr-draft-line mr-1"/>{t('title.draft')}
      </span>
    }
  </div>

  <!-- category + tag pills -->
  <div class="flex flex-wrap gap-1 mb-3">
    {
      category && dealLabel(category).filter(item => item !== 'uncategorized').map((categoryName) => (
        <a href={"/category/" + categoryName} class="meta-pill hover:text-skin-active">
          <i class="ri-folder-3-line mr-1"/>{categoryName}
        </a>
      ))
    }
    {
      tags && dealLabel(tags).map((tagName) => (
        <a href={"/tags/" + tagName} class="meta-pill hover:text-skin-active">
          <i class="ri-price-tag-3-line mr-1"/>{tagName}
        </a>
      ))
    }
  </div>
</div>
